import? 'scripts/languages.just'

default:
  just --list

update:
  -chezmoi update
  -nix-channel --update

config: git-config

git-config:
  git config --global user.name "Beforerr"
  git config --global user.email "zzj956959688@gmail.com"
  git config --global github.user "Beforerr"

backup-config:
  #!/usr/bin/env sh
  mackup backup --force && mackup uninstall --force

backup-pictures:
  rclone sync ~/Pictures BoxUCLA:Pictures --progress

# restoring the configuration using mackup
restore-config:
  #!/usr/bin/env sh
  echo "Syncing applications with 'mackup'..."
  mackup restore --force && mackup uninstall --force

migrate:
  rclone sync GoogleDriveUCLA:library BoxUCLA:library --progress
  ln -s "/Volumes/My Passport for Mac/data" ~/data

clean:
  -nix-collect-garbage -d
  -brew cleanup

version:
  -nix --version
  -brew --version
  -micromamba --version

zotero-link:
  ln -s ~/Library/CloudStorage/Box-Box/storage ~/Zotero/storage

zotero-addons:
  aria2c https://github.com/syt2/zotero-addons/releases/latest/download/zotero-addons.xpi

popclip:
	curl https://pilotmoon.com/popclip/extensions/ext/DOI.popclipextz -o "DOI.popclipextz"
	open "DOI.popclipextz"

gpt-academic:
  #!/usr/bin/env sh
  cd ~/src/gpt_academic
  micromamba run -n gptac_venv python -m pip install -r requirements.txt # 这个步骤和pip安装一样的步骤
  micromamba run -n gptac_venv python main.py

env-install:
  micromamba env create --file environment.yml